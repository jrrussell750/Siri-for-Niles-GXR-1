Please note:

This file is under construction and will be updated several times during the next few weeks.  You can contact me at john@nichcom.com if
you have questions or suggestions.


You can configure a raspberry pi as a Niles GXR-2 controller and then use Siri to voice control the Niles through the use of shortcuts.  This
project assumes that you have access to a properly configured Niles GXR-2 that is operating properly.


Overview:

1.	Connect a display, keyboard, mouse, and power supply to the raspberry pi.
2.	Using instructions from the Raspberry Pi site (https://www.raspberrypi.com/software/), build the latest version of the raspberry 
	pi operating system on a micro SD card.
3.	Insert the micro SD card into a raspberry pi and boot it up.
4.	Configure the wireless connection of the raspberry pi for access to your local network.
5.	Verify that Apache is working.
6.	Install PHP.
6.	Copy files from github repository to raspberry pi.
7.	Connect the wired connection of the raspberry pi to the Expansion port of the Niles GXR-2.  

	Warning:  The Niles GXR-2 has 12 RJ-45 female ports that are used for controllers.  These ports send power to the controllers using a 
	non-standard DC voltage via pins 7 and 8.  Also, pins 4 and 5 are used to transfer ir remote signals from controllers to the GXR-2.  
	Therefore, making a connection from the wired port on the Raspberry Pi to any of the controller ports on the Niles GXR-2 may damage 
	the raspberry pi and/or the GXR-2.  Make sure you are connecting the wired port from the Raspberry Pi to the port labeled "Expansion" on
	the GXR-2.
	
8.	Record the IP address of your raspberry pi's wireless connection for use in the shortcut(s).
9.	Create and test first shortcut on your Iphone to Get contents of URL.
10.	Add additional shortcut(s) as required.


Details

Items required:

  	Raspberry pi 3 or above with appropriate power supply (a power supply with an on/off switch is preferred
	Raspberry Pi case (Optional)
	Micro SD Card
	HDMI monitor
	HDMI cable (Raspberry Pi 3) or Micro HDMI to Standard HDMI Cable (Raspberry Pi 4) 
	Keyboard with touch pad or mouse
	Computer with SD card reader (used to download and install the raspberry pi operating system on the Micro SD card)
	Access to a wireless Ethernet LAN with Internet access
	Access to a Niles GXR-2 controller in working condition
	Ethernet patch cable (raspberry pi wired LAN to GXR-2 expansion port)
	An iPhone 6 or above with IOS 15 and functioning Siri

Connecting the Raspberry Pi 

	It is best to obtain a power supply that is designed to work with the Raspberry pi, as some USB power supplies won't
	provide sufficient current, and Pi will not function properly.
	
	a.  Connecting the keyboard.  Plug a USB keyboard into one of the USB connectors on the Raspberry Pi.
	b.  Connecting the mouse.  Plug a USB mouse into one of the remaining free USV connectors.
	
	

Copying files from github

	This github repository contains a file called siri.php.  Copy this file to the /var/www/html directory on the Raspberry Pi.


Creating and testing the first shortcut

	a.  Open the siri shortcuts app.
	b.  Press the plus sign (+) in the upper right corner of the app.
	c.  Click on Shortcut Name and type in something like Turn On Niles.
	d.  Click on Add Action.  
	e.  In the search window that appears, type in Get Contents of URL.
	f.  Click on Get Contents of URL to select it.
	g.  Click on URL and enter the following:

	http://<enter ip address of your niles pi here>/siri.php?zone=<zone> Room&device=<device>

        Note:  Youâ€™ll need to use IP, zone, and device names from your system.  Also, the names are case sensitive, so make sure they are spelled 
	and capitalized correctly.  You can also edit the zone and device names in the siri.php file to make it easier to refer to them in the URL.

	h.  Test your shortcut.

 
